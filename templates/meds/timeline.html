{% extends 'base.html' %}
{% block content %}

<link rel="stylesheet" href="{{ url_for('static', filename='css/meds.css') }}" />

<div class="container py-3">
  <div class="d-flex justify-content-between align-items-center">
    <h3>Time line de uso</h3>
    <a class="btn btn-outline-secondary" href="{{ url_for('dashboard') }}">Voltar</a>
  </div>
  {% if alerts %}
    <div class="alert alert-warning mt-3">
      <b>Atenção:</b>
      {% for a in alerts %}
        <div>O remédio <b>{{ a.name }}</b> está acabando (restam {{ a.remaining }} ~ {{ a.days_left }} dia(s)).</div>
      {% endfor %}
    </div>
  {% endif %}
  <div class="row mt-3">
    <div class="col-lg-6">
      <h5>Resumo diário (últimos 60 dias)</h5>
      <table class="table table-sm table-striped">
        <thead><tr><th>Dia</th><th>Comprimidos tomados</th></tr></thead>
        <tbody>
          {% for r in rows %}
            <tr><td>{{ r.day }}</td><td>{{ r.total }}</td></tr>
          {% else %}
            <tr><td colspan="2">Sem registros ainda.</td></tr>
          {% endfor %}
        </tbody>
      </table>
    </div>
    <div class="col-lg-6">
      <h5>Por remédio</h5>
      <table class="table table-sm table-striped">
        <thead><tr><th>Dia</th><th>Remédio</th><th>Tomados</th></tr></thead>
        <tbody>
          {% for r in per_med %}
            <tr><td>{{ r.day }}</td><td>{{ r.name }}</td><td>{{ r.total }}</td></tr>
          {% else %}
            <tr><td colspan="3">Sem registros por remédio.</td></tr>
          {% endfor %}
        </tbody>
      </table>
    </div>
  </div>
</div>
{% endblock %}